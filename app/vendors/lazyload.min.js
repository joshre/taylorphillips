!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.LazyLoad=e()}(this,function(){function t(){m||(p={elements_selector:"img",container:window,threshold:300,throttle:50,data_src:"original",data_srcset:"original-set",class_loading:"loading",class_loaded:"loaded",skip_invisible:!0,callback_load:null,callback_error:null,callback_set:null,callback_processed:null},_=!!window.addEventListener,f=!!window.attachEvent,g=!!document.body.classList,m=!0)}function e(t,e,n){return _?void t.addEventListener(e,n):void(f&&(t.attachEvent("on"+e,function(t){return function(){n.call(t,window.event)}}(t)),t=null))}function n(t,e,n){return _?void t.removeEventListener(e,n):void(f&&t.detachEvent("on"+e,n))}function o(t,e,n){function o(){return window.innerWidth||d.documentElement.clientWidth||document.body.clientWidth}function i(){return window.innerHeight||d.documentElement.clientHeight||document.body.clientHeight}function l(t){return t.getBoundingClientRect().top+h-d.documentElement.clientTop}function r(t){return t.getBoundingClientRect().left+p-d.documentElement.clientLeft}function s(){var o;return o=e===window?i()+h:l(e)+e.offsetHeight,o<=l(t)-n}function a(){var i;return i=e===window?o()+window.pageXOffset:r(e)+o(),i<=r(t)-n}function c(){var o;return o=e===window?h:l(e),o>=l(t)+n+t.offsetHeight}function u(){var o;return o=e===window?p:r(e),o>=r(t)+n+t.offsetWidth}var d,h,p;return d=t.ownerDocument,h=window.pageYOffset||d.body.scrollTop,p=window.pageXOffset||d.body.scrollLeft,!(s()||c()||a()||u())}function i(){var t=new Date;return t.getTime()}function l(t,e){var n,o={};for(n in t)t.hasOwnProperty(n)&&(o[n]=t[n]);for(n in e)e.hasOwnProperty(n)&&(o[n]=e[n]);return o}function r(t){try{return Array.prototype.slice.call(t)}catch(e){var n,o=[],i=t.length;for(n=0;n<i;n++)o.push(t[n]);return o}}function s(t,e){return g?void t.classList.add(e):void(t.className+=(t.className?" ":"")+e)}function a(t,e){return g?void t.classList.remove(e):void(t.className=t.className.replace(new RegExp("(^|\\s+)"+e+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,""))}function c(t,e){var n=t.parentElement;if("PICTURE"===n.tagName)for(var o=0;o<n.children.length;o++){var i=n.children[o];if("SOURCE"===i.tagName){var l=i.getAttribute("data-"+e);l&&i.setAttribute("srcset",l)}}}function u(t,e,n){var o=t.tagName,i=t.getAttribute("data-"+n);if("IMG"===o){c(t,e);var l=t.getAttribute("data-"+e);return l&&t.setAttribute("srcset",l),void(i&&t.setAttribute("src",i))}return"IFRAME"===o?void(i&&t.setAttribute("src",i)):void(t.style.backgroundImage="url("+i+")")}function d(t,e){return function(){return t.apply(e,arguments)}}function h(n){t(),this._settings=l(p,n),this._queryOriginNode=this._settings.container===window?document:this._settings.container,this._previousLoopTime=0,this._loopTimeout=null,this._handleScrollFn=d(this.handleScroll,this),e(window,"resize",this._handleScrollFn),this.update()}var p,_,f,g,m=!1;return h.prototype._showOnAppear=function(t){function o(){null!==i&&(i.callback_load&&i.callback_load(t),a(t,i.class_loading),s(t,i.class_loaded),n(t,"load",o))}var i=this._settings;"IMG"!==t.tagName&&"IFRAME"!==t.tagName||(e(t,"load",o),e(t,"error",function(){n(t,"load",o),a(t,i.class_loading),i.callback_error&&i.callback_error(t)}),s(t,i.class_loading)),u(t,i.data_srcset,i.data_src),i.callback_set&&i.callback_set(t)},h.prototype._loopThroughElements=function(){var t,e,n=this._settings,i=this._elements,l=i?i.length:0,r=[];for(t=0;t<l;t++)e=i[t],n.skip_invisible&&null===e.offsetParent||o(e,n.container,n.threshold)&&(this._showOnAppear(e),r.push(t),e.wasProcessed=!0);for(;r.length>0;)i.splice(r.pop(),1),n.callback_processed&&n.callback_processed(i.length);0===l&&this._stopScrollHandler()},h.prototype._purgeElements=function(){var t,e,n=this._elements,o=n.length,i=[];for(t=0;t<o;t++)e=n[t],e.wasProcessed&&i.push(t);for(;i.length>0;)n.splice(i.pop(),1)},h.prototype._startScrollHandler=function(){this._isHandlingScroll||(this._isHandlingScroll=!0,e(this._settings.container,"scroll",this._handleScrollFn))},h.prototype._stopScrollHandler=function(){this._isHandlingScroll&&(this._isHandlingScroll=!1,n(this._settings.container,"scroll",this._handleScrollFn))},h.prototype.handleScroll=function(){var t,e,n;this._settings&&(e=i(),n=this._settings.throttle,0!==n?(t=n-(e-this._previousLoopTime),t<=0||t>n?(this._loopTimeout&&(clearTimeout(this._loopTimeout),this._loopTimeout=null),this._previousLoopTime=e,this._loopThroughElements()):this._loopTimeout||(this._loopTimeout=setTimeout(d(function(){this._previousLoopTime=i(),this._loopTimeout=null,this._loopThroughElements()},this),t))):this._loopThroughElements())},h.prototype.update=function(){this._elements=r(this._queryOriginNode.querySelectorAll(this._settings.elements_selector)),this._purgeElements(),this._loopThroughElements(),this._startScrollHandler()},h.prototype.destroy=function(){n(window,"resize",this._handleScrollFn),this._loopTimeout&&(clearTimeout(this._loopTimeout),this._loopTimeout=null),this._stopScrollHandler(),this._elements=null,this._queryOriginNode=null,this._settings=null},h});